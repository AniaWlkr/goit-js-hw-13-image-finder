{"version":3,"sources":["webpack:///./templates/imageCard.hbs","webpack:///./js/get-refs.js","webpack:///./js/api/apiService.js","webpack:///./js/settings/index.js","webpack:///./js/images-pagination/index.js","webpack:///./js/pnotify/index.js","webpack:///./js/scroll-up/index.js","webpack:///./js/modal-img/index.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","getRefs","form","document","querySelector","gallery","loadMoreBtn","scrollUpBtn","BASE_URL","API_KEY","IMG_PER_PAGE","page","query","pageUrl","fetch","resolve","ok","json","fetchImages","refs","imagesPagination","this","currentPage","queryStr","onFormSubmit","bind","loadMore","event","preventDefault","innerHTML","value","trim","imagesApi","then","renderImages","catch","err","info","text","sticker","delay","onFetchError","hits","length","classList","remove","imagesMarkUp","imagesListTmpl","insertAdjacentHTML","add","scrollToNewElements","headerHeight","clientHeight","totalScrollHeight","setTimeout","window","scrollTo","top","behavior","addEventListener","left","trackScroll","pageYOffset","documentElement","largeImgUrl","target","dataset","largeImg","basicLightbox","show","images","throttle"],"mappings":"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","file":"main.87945202cf6c87585a94.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\n  <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":11},\"end\":{\"line\":3,\"column\":27}}}) : helper)))\n    + \" alt=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":32},\"end\":{\"line\":3,\"column\":40}}}) : helper)))\n    + \" class=\\\"img\\\" data-large-img=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":68},\"end\":{\"line\":3,\"column\":85}}}) : helper)))\n    + \" />\\n  <div class=\\\"stats\\\">\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">thumb_up</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":6},\"end\":{\"line\":7,\"column\":15}}}) : helper)))\n    + \"\\n    </p>\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">visibility</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":6},\"end\":{\"line\":11,\"column\":15}}}) : helper)))\n    + \"\\n    </p>\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">comment</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":6},\"end\":{\"line\":15,\"column\":18}}}) : helper)))\n    + \"\\n    </p>\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">cloud_download</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":6},\"end\":{\"line\":19,\"column\":19}}}) : helper)))\n    + \"\\n    </p>\\n  </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":23,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","export default function getRefs() {\n  return {\n    form: document.querySelector('#search-form'),\n    gallery: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('button[data-action=\"load-more\"]'),\n    scrollUpBtn: document.querySelector('.scroll-up'),\n  };\n}","import settings from '../settings/index.js';\nconst { BASE_URL, API_KEY, IMG_PER_PAGE } = settings;\n\nasync function fetchImages(page, query) {\n  const pageUrl = `${BASE_URL}${API_KEY}&image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=${IMG_PER_PAGE}`;\n  const resolve = await fetch(pageUrl);\n  if (!resolve.ok) { \n    throw resolve;\n  }\n  return await resolve.json();\n}\n\nexport default fetchImages;\n","export default {\n  BASE_URL: 'https://pixabay.com/api/',\n  API_KEY: '?key=20668572-c55967f2cfb5248074fb94654',\n  IMG_PER_PAGE: 12,\n};","import imagesApi from '../api/apiService';\nimport imagesListTmpl from '../../templates/imageCard.hbs';\nimport onFetchError from '../pnotify';\nimport getRefs from '../get-refs';\nimport * as basicLightbox from 'basiclightbox';\n\nconst refs = getRefs();\n\nclass imagesPagination { \n  constructor() {\n    this.currentPage = 1;\n    this.queryStr = '';\n    // this.scrollMarker = null;\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n  }\n  \n  onFormSubmit(event) { \n    event.preventDefault();\n    this.currentPage = 1; \n    refs.gallery.innerHTML = '';\n\n    this.queryStr = refs.form.query.value.trim();\n    if (!this.queryStr) return;\n\n    this.fetchImages();\n  }\n   \n  fetchImages() { \n    return imagesApi(this.currentPage, this.queryStr)\n    .then(this.renderImages)\n    .catch(err => onFetchError(err));\n  }\n\n  renderImages({ hits }) { \n    if (hits.length === 0) {\n      refs.loadMoreBtn.classList.remove('is-visible');\n      throw 'Nothing was found. Please try another search';\n    }\n    \n    const imagesMarkUp = imagesListTmpl(hits);\n    refs.gallery.insertAdjacentHTML('beforeend', imagesMarkUp);\n    refs.loadMoreBtn.classList.add('is-visible');\n  }\n  \n  loadMore() { \n    this.currentPage += 1;\n    // this.scrollMarker = refs.gallery.lastElementChild;\n   \n    this.fetchImages()\n      .then(() => this.scrollToNewElements()\n    // this.scrollMarker.scrollIntoView({behavior: \"smooth\"})\n    );\n  }\n\n  scrollToNewElements() {\n    const headerHeight = document.querySelector('.pixabay-link').clientHeight + document.querySelector('#search-form').clientHeight;\n    const totalScrollHeight = refs.gallery.clientHeight - headerHeight;\n \n    setTimeout(() => {\n      window.scrollTo({\n        top: totalScrollHeight,\n        behavior: 'smooth',\n      });\n    }, 500);\n}\n}\n\nexport default imagesPagination;","import '@pnotify/core/dist/PNotify.css';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport { info } from '@pnotify/core/dist/PNotify.js';\n\nexport default function onFetchError(err) {\n  info({\n    text: `${err}`,\n    sticker: false,\n    delay: 5000\n  });\n}\n","import getRefs from '../get-refs';\n\nconst refs = getRefs();\n\nfunction trackScroll() { \n  const scrolledOffset = window.pageYOffset;\n  const viewHeight = document.documentElement.clientHeight;\n\n  scrolledOffset > viewHeight ? refs.scrollUpBtn.classList.add('is-visible'): refs.scrollUpBtn.classList.remove('is-visible');\n}\n\nfunction onScrollUp() {  \n  window.scrollTo({\n    top: 0,\n    left: 0,\n    behavior: 'smooth'\n  });\n}\n\nrefs.scrollUpBtn.addEventListener('click', onScrollUp);\n\nexport default trackScroll;","import getRefs from '../get-refs';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst refs = getRefs();\n\nfunction largeImgOpen(event) { \n  const largeImgUrl = event.target.dataset.largeImg;\n  \n  if (!largeImgUrl) return;\n\n  const instance = basicLightbox.create(`\n    <img src=\"${largeImgUrl}\" width=\"800\" height=\"600\">\n`);\n\n  instance.show()\n}\n\nrefs.gallery.addEventListener('click', largeImgOpen);","import './styles.css';\nimport { throttle } from \"lodash\";\nimport getRefs from './js/get-refs';\nimport imagesPagination from './js/images-pagination';\nimport trackScroll from './js/scroll-up';\nimport './js/modal-img';\n\nconst refs = getRefs();\nconst images = new imagesPagination();\n\nrefs.form.addEventListener('submit', images.onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', images.loadMore);\nwindow.addEventListener('scroll', throttle(trackScroll, 300));"],"sourceRoot":""}